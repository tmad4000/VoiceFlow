{"id":"VoiceFlow-014","title":"Add spoken punctuation keywords (colon, exclamation, etc.)","description":"Review needed: confirm which spoken punctuation phrases should be supported.\n\nMap spoken punctuation phrases like 'colon', 'exclamation point', 'question mark' into symbols during dictation.\n\n**Note:** See VoiceFlow-4o7 for expanded scope including live dictation mode behavior.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:32:08.605382-08:00","updated_at":"2026-01-12T21:44:09.008888-07:00"}
{"id":"VoiceFlow-083","title":"Context-aware capitalization using accessibility","description":"Read the current text field context via accessibility APIs to determine proper capitalization (e.g., don't capitalize after a comma, do capitalize at start of field or after period). Could also inform punctuation decisions.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T01:01:42.01636-08:00","updated_at":"2026-01-01T01:01:42.01636-08:00"}
{"id":"VoiceFlow-0jt","title":"Fix dictation transfer when speaking immediately after mic off-\u003eon","description":"Review needed: define expected behavior for first utterance after mic Off→On.\n\nSometimes first utterance after turning mic from Off to On fails to transfer. Investigate startup/connection timing and add buffering or grace period.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:31:47.191338-08:00","updated_at":"2026-01-06T16:16:37.6627-08:00"}
{"id":"VoiceFlow-0lp","title":"Feature: Automatic Sleep Timer","description":"Automatically transition the microphone from On mode to Sleep mode after a configurable period of silence (default 15 minutes). This should be enabled by default but include a setting to adjust the duration or disable it entirely for long-running dictation sessions.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-27T08:26:21.796057-08:00","updated_at":"2025-12-27T15:06:57.756182-08:00","closed_at":"2025-12-27T15:06:57.756207-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-0n2","title":"Feature: Context-Aware Dictation (Smart Punctuation)","description":"Research and implement a way to retrieve the text context surrounding the cursor using Accessibility APIs (AXUIElement). Use this context to improve capitalization and punctuation (e.g., knowing to capitalize if following a period). Consider sending this context to an AI model for better prediction.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-27T08:06:48.045005-08:00","updated_at":"2025-12-27T08:06:48.045005-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-0rh","title":"Add extensible voice-to-keyboard shortcut system","description":"Map voice commands like 'tab back' to Ctrl+Shift+Tab for RSI-friendly navigation","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T18:18:37.79517-08:00","updated_at":"2025-12-26T18:25:10.597692-08:00","closed_at":"2025-12-26T18:25:10.597692-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-0zq","title":"Add dictation keywords: no caps/letter + at sign/hashtag condensation","description":"Implement no-caps + letter directives and condense at/hashtag phrases into @/# tokens.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T16:10:07.354214-08:00","updated_at":"2026-01-06T16:10:21.67517-08:00","closed_at":"2026-01-06T16:10:21.67517-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-10c","title":"Add minimal/compact mode for floating panel","description":"Add a toggle to switch the floating panel between:\n\n**Minimal Mode:**\n- Just shows on/off/sleep buttons (or a single toggle)\n- Smallest possible footprint\n- Stays out of the way during normal use\n\n**Normal Mode:**\n- Current full UI with transcript, history, warnings, etc.\n\n**UX Ideas:**\n- Double-click to toggle modes\n- Small expand/collapse button in corner\n- Keyboard shortcut to toggle\n- Remember last mode preference\n\n**Implementation:**\n- Add `isPanelMinimal` state to AppState\n- Create MinimalPanelView with just mode buttons\n- Animate size transition between modes","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T21:01:52.297188-07:00","updated_at":"2026-01-09T21:10:16.855711-07:00","closed_at":"2026-01-09T21:10:16.855711-07:00","close_reason":"Implemented minimal panel mode with collapse/expand buttons and animated transitions"}
{"id":"VoiceFlow-160","title":"Add special keywords + shortcuts view in Commands settings","description":"Show dictation keywords like 'new line'/'say' in Commands tab and provide a view of global shortcuts.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T11:29:11.002988-08:00","updated_at":"2025-12-30T11:29:49.557132-08:00","closed_at":"2025-12-30T11:29:49.557132-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-1m5","title":"Build WebSocket client for AssemblyAI streaming API","description":"Connect to wss://streaming.assemblyai.com/v3/ws, send audio, receive transcripts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:18:31.581878-08:00","updated_at":"2025-12-26T18:25:09.227328-08:00","closed_at":"2025-12-26T18:25:09.227328-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-1rf","title":"AssemblyAI transcription latency regression","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T21:55:07.436202-08:00","updated_at":"2025-12-31T21:57:40.063523-08:00","closed_at":"2025-12-31T21:57:40.063523-08:00","close_reason":"Removed speaker_labels parameter from AssemblyAI connection - this was causing significant latency"}
{"id":"VoiceFlow-1sw","title":"Feature: Pre-emptive Dictation Flush on Command Detection","description":"When a command is recognized in Mixed mode, immediately type any unfinalized words that occurred BEFORE the command phrase. This prevents shortcuts (like 'copy that' or 'new tab') from executing before the preceding dictated text has been inserted.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:32:05.725468-08:00","updated_at":"2025-12-27T15:12:31.1998-08:00","closed_at":"2025-12-27T15:12:31.19981-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-27e","title":"Respect pauses for 'new line' keyword detection","description":"Use word timing to only trigger newline keyword when 'new' and 'line' are close together; ensure keyword pill fires when applied.","notes":"Use actual say-prefix detection per turn instead of sticky flag; avoid blocking keywords like new line.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:58:02.527596-08:00","updated_at":"2025-12-30T12:55:00.44303-08:00","closed_at":"2025-12-30T12:55:00.44303-08:00","close_reason":"Closed","comments":[{"id":6,"issue_id":"VoiceFlow-27e","author":"jacobcole","text":"Adjust newline keyword pause threshold and ensure keyword feedback","created_at":"2025-12-30T20:19:21Z"},{"id":8,"issue_id":"VoiceFlow-27e","author":"jacobcole","text":"Fix newline keyword logic (trim/ literal flags)","created_at":"2025-12-30T20:26:56Z"},{"id":9,"issue_id":"VoiceFlow-27e","author":"jacobcole","text":"Keyword gap timing may be in ms; adjust scaling to detect newline","created_at":"2025-12-30T20:33:57Z"},{"id":10,"issue_id":"VoiceFlow-27e","author":"jacobcole","text":"Keyword detection still failing; adjust say-prefix handling to avoid blocking keywords","created_at":"2025-12-30T20:54:34Z"}]}
{"id":"VoiceFlow-28w","title":"Investigate newline creating background tab in Chrome","description":"Review needed: confirm Chrome repro steps and expected newline behavior.\n\nRepro: saying 'new line' in Chrome sometimes opens a background tab instead of inserting a newline. Identify event mapping conflict and adjust key dispatch/timing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:31:37.636874-08:00","updated_at":"2026-01-06T16:16:32.39291-08:00"}
{"id":"VoiceFlow-29c","title":"Fix 'say' literal escape for following command phrases","description":"When an utterance starts with 'say', treat it as literal in live dictation and avoid stripping command phrases.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T11:22:36.553647-08:00","updated_at":"2025-12-30T11:50:20.572438-08:00","closed_at":"2025-12-30T11:50:20.572438-08:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"VoiceFlow-29c","author":"jacobcole","text":"Say literal still outputs 'say'/'safe' instead of stripping prefix","created_at":"2025-12-30T19:49:57Z"}]}
{"id":"VoiceFlow-29l","title":"Add Shortcuts Help to Settings","description":"Add a section in Settings displaying available shortcuts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:46.447645-08:00","updated_at":"2025-12-29T19:45:28.902965-08:00","closed_at":"2025-12-29T19:45:28.902965-08:00","close_reason":"Implemented as requested.","labels":["Documentation","UI"]}
{"id":"VoiceFlow-2at","title":"Architecture: Hybrid App Store + Direct Distribution Strategy","description":"Design VoiceFlow with modular architecture to support both App Store (lite) and direct distribution (pro) versions.\n\n## Background\n- Accessibility API (AXUIElement) required for context-aware features\n- Accessibility API NOT allowed in Mac App Store sandbox\n- Input Monitoring (CGEventTap) IS allowed in sandbox\n\n## Strategy\n**App Store Lite Version:**\n- Basic dictation (type at cursor)\n- Voice commands\n- Uses Input Monitoring only\n\n**Direct Pro Version:**\n- All lite features plus:\n- Context-aware punctuation (reads text field content)\n- Smart terminal mode detection\n- Inline text rewriting/replacement\n\n## Implementation Notes\n- Core engine should be shared between versions\n- Accessibility features should be modular/optional\n- Runtime detection of available permissions\n- Feature flags or build configurations to differentiate","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-27T22:49:15.363839-08:00","updated_at":"2025-12-27T22:50:33.093309-08:00","comments":[{"id":3,"issue_id":"VoiceFlow-2at","author":"jacobcole","text":"Research doc: docs/research/2024-12-27-speech-apis-dictation.md\n\nSection 8 covers Accessibility vs Input Monitoring permissions and App Store implications.","created_at":"2025-12-28T06:52:10Z"}]}
{"id":"VoiceFlow-2cf","title":"Extra top space above mode buttons in floating panel","description":"There is unnecessary vertical space at the top of the floating panel above the Off/On/Wake buttons. Reduced .padding(.top, 8) to 4 but may need further adjustment or window style changes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T00:10:24.984814-08:00","updated_at":"2025-12-27T07:17:13.574632-08:00","closed_at":"2025-12-27T10:00:00-08:00"}
{"id":"VoiceFlow-2d0","title":"Implement auto-fill for API keys","description":"Allow loading default API keys from a non-committed Secrets file or similar mechanism.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:20.050502-08:00","updated_at":"2025-12-29T19:45:28.896011-08:00","closed_at":"2025-12-29T19:45:28.896011-08:00","close_reason":"Implemented as requested.","labels":["Config","Security"]}
{"id":"VoiceFlow-3j4","title":"Add Indefinite utterance mode preset (max wait / high certainty)","description":"Add an UtteranceMode preset for very long pauses and maximum certainty. Use high confidence threshold (e.g., 0.95-0.99) and long silence threshold (e.g., 1500-3000ms). Update Settings labels and slider ranges to include the new mode.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T05:12:09.875914-08:00","updated_at":"2025-12-27T06:30:43.261164-08:00","closed_at":"2025-12-27T06:30:43.261164-08:00","close_reason":"Implemented Extra Long utterance mode preset and expanded sliders"}
{"id":"VoiceFlow-3r7","title":"Consume punctuation after newline keyword","description":"Remove trailing punctuation (e.g., period/comma) immediately after 'new line' so dictation doesn't insert extra punctuation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:29:02.788726-08:00","updated_at":"2025-12-30T11:45:01.058647-08:00","closed_at":"2025-12-30T11:45:01.058647-08:00","close_reason":"Closed","comments":[{"id":4,"issue_id":"VoiceFlow-3r7","author":"jacobcole","text":"Newline punctuation still appearing; need more robust handling","created_at":"2025-12-30T19:34:27Z"}]}
{"id":"VoiceFlow-3v6","title":"Optional command correction and delay","description":"Add cancel/no-wait commands with best-effort undo and configurable command delay in settings.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T22:21:07.412585-08:00","updated_at":"2025-12-26T22:22:14.54734-08:00","closed_at":"2025-12-26T22:22:14.54734-08:00","close_reason":"Configurable command delay and cancel/no-wait implemented"}
{"id":"VoiceFlow-43i","title":"Save raw audio recordings with dictation history","description":"Save the raw audio recordings alongside transcription history for:\n- Playback/review of what was actually said\n- Debugging transcription issues\n- Training/fine-tuning local models\n- Accessibility review\n\n## When to Record\n- **Only when mic is \"hot\"**: On mode or Push-to-Talk active\n- **NOT in Sleep mode**: Don't save audio while waiting for wake word\n- This significantly reduces storage and privacy concerns\n\n## Implementation Ideas\n- Save audio chunks to disk during capture (PCM/WAV format)\n- Link audio files to transcript entries in history\n- Add playback button in history view\n- Configurable retention period (auto-delete old recordings)\n- Storage location setting (default ~/Library/Application Support/VoiceFlow/recordings/)\n\n## Considerations\n- Storage space (16kHz mono PCM is ~1.9MB/minute)\n- Privacy implications - clear user consent\n- Option to disable recording entirely\n- Compression options (AAC, FLAC, Opus)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T20:01:04.98852-07:00","updated_at":"2026-01-12T21:44:24.131051-07:00"}
{"id":"VoiceFlow-44w","title":"Force End Utterance is unreliable","description":"Force End (button/voice commands) sometimes doesn't finalize or type the latest utterance. Define expected behavior (wait for current audio to be processed, then end-of-turn). Add logging and fallback typing for unformatted turns if needed; avoid double-typing.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T05:12:15.205742-08:00","updated_at":"2025-12-27T15:07:02.924202-08:00","closed_at":"2025-12-27T15:07:02.924205-08:00"}
{"id":"VoiceFlow-4b7","title":"Implement microphone audio capture with AVFoundation","description":"Capture mono 16-bit PCM audio at 16kHz for AssemblyAI streaming","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:18:30.368451-08:00","updated_at":"2025-12-26T18:25:08.876407-08:00","closed_at":"2025-12-26T18:25:08.876407-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-4eo","title":"On button dropdown not working","description":"The dropdown menu on the On button in the floating panel is not functioning correctly.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T22:04:02.803801-08:00","updated_at":"2025-12-27T23:26:35.639817-08:00","closed_at":"2025-12-27T23:26:35.639817-08:00","close_reason":"Fixed dropdown with menuStyle(.borderlessButton)"}
{"id":"VoiceFlow-4o7","title":"Support explicit punctuation keywords in live dictation mode","description":"Even when live dictation mode is on (no auto-punctuation), support explicit spoken punctuation keywords:\n\n## Punctuation Keywords\n- \"period\" / \"full stop\" → .\n- \"comma\" → ,\n- \"question mark\" → ?\n- \"exclamation point\" / \"exclamation mark\" → !\n- \"colon\" → :\n- \"semicolon\" → ;\n- \"open paren\" / \"left paren\" → (\n- \"close paren\" / \"right paren\" → )\n- \"open bracket\" / \"left bracket\" → [\n- \"close bracket\" / \"right bracket\" → ]\n- \"open brace\" / \"left brace\" → {\n- \"close brace\" / \"right brace\" → }\n- \"quote\" / \"open quote\" → \"\n- \"end quote\" / \"close quote\" → \"\n- \"apostrophe\" → '\n- \"dash\" / \"hyphen\" → -\n- \"ellipsis\" → ...\n\n## Line/Space Keywords (already exist but verify)\n- \"new line\" / \"newline\" → \\n\n- \"new paragraph\" → \\n\\n\n- \"tab\" → \\t\n\n## Design Considerations\n- Should this be a separate setting or always enabled in live dictation mode?\n- Keyword detection should respect pause timing (avoid \"period\" in \"time period\")\n- Consider \"literal period\" escape for edge cases\n- Related to VoiceFlow-014 (spoken punctuation keywords)\n\n## Related Tickets\n- VoiceFlow-014: Add spoken punctuation keywords","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T21:43:52.56572-07:00","updated_at":"2026-01-12T21:43:52.56572-07:00","dependencies":[{"issue_id":"VoiceFlow-4o7","depends_on_id":"VoiceFlow-014","type":"blocks","created_at":"2026-01-12T21:44:08.708772-07:00","created_by":"daemon"}]}
{"id":"VoiceFlow-57l","title":"New line detection not working in live dictation","description":"Saying 'new line' or similar phrases doesn't insert a newline character in live dictation mode.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T22:04:01.432054-08:00","updated_at":"2025-12-27T22:14:35.909322-08:00","closed_at":"2025-12-27T22:14:35.909322-08:00","close_reason":"Fixed in commit a4bb595"}
{"id":"VoiceFlow-5ac","title":"Menu bar app and floating panel","description":"Replace WindowGroup with MenuBarExtra + floating panel window, add panel show/hide and window configuration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T22:04:42.726106-08:00","updated_at":"2025-12-26T22:17:24.495937-08:00","closed_at":"2025-12-26T22:17:24.495937-08:00","close_reason":"Menu bar app and floating panel implemented"}
{"id":"VoiceFlow-5bu","title":"Detect commands in partial utterances for faster response","description":"Commands like 'speech on', 'wake up', 'go to sleep' should be detected and executed as soon as they're recognized in partial transcripts, not wait for end-of-turn.\n\n## Benefits\n- Much faster command response (sub-second)\n- Better UX for mode switching\n\n## Implementation\n- Check partial transcripts for command matches\n- Execute immediately when high-confidence match found\n- May need confidence threshold to avoid false positives\n\n## Commands to Prioritize\n- Mode switching: speech on/off, wake up, go to sleep\n- Flow commands: flow on/off/sleep","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-13T12:39:12.995529-07:00","updated_at":"2026-01-13T12:39:12.995529-07:00"}
{"id":"VoiceFlow-65o","title":"Add AI/search interface for settings","description":"When the settings panel is open, provide a way to:\n- Search settings by keyword\n- Ask AI to change settings (e.g., \"turn on live dictation\", \"make the silence threshold longer\")\n- Inquire about what settings do\n\nCould be:\n- A search bar at the top of Settings\n- A chat input for natural language commands\n- Integration with VoiceFlow's voice commands for settings control","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-09T21:07:13.225902-07:00","updated_at":"2026-01-09T21:07:13.225902-07:00"}
{"id":"VoiceFlow-6f8","title":"Consider WhisperFlow/Aqua Voice style popup UI","description":"Explore adding a minimal popup window mode similar to WhisperFlow and Aqua Voice. These apps show a small floating indicator/window when dictating that's less intrusive than the full panel. Could be useful for quick dictation without the full transcript view.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-01T00:57:56.841827-08:00","updated_at":"2026-01-01T00:57:56.841827-08:00"}
{"id":"VoiceFlow-6fa","title":"Enhance spell command to convert spoken numbers and symbols","description":"Make the \"spell\" command smarter at converting spoken words to characters.\n\n## Current Behavior\n- \"spell hello\" → types \"hello\" (just removes spaces)\n\n## Desired Behavior\n- \"spell eight three nine\" → types \"839\"\n- \"spell e n d\" → types \"end\"\n- \"spell capital a b c\" → types \"Abc\"\n- \"spell at sign\" → types \"@\"\n- \"spell hash tag\" → types \"#\"\n\n## Word-to-Character Mappings\n\n### Numbers\n- zero/oh → 0\n- one → 1\n- two/to/too → 2\n- three → 3\n- four/for → 4\n- five → 5\n- six → 6\n- seven → 7\n- eight → 8\n- nine → 9\n\n### Symbols\n- at sign / at → @\n- hash / hashtag / pound → #\n- dollar / dollar sign → $\n- percent → %\n- ampersand / and sign → \u0026\n- asterisk / star → *\n- plus → +\n- equals / equal sign → =\n- dash / hyphen / minus → -\n- underscore → _\n- period / dot → .\n- comma → ,\n- slash / forward slash → /\n- backslash → \\\n- colon → :\n- semicolon → ;\n- question mark → ?\n- exclamation / exclamation point → !\n- open paren / left paren → (\n- close paren / right paren → )\n- open bracket / left bracket → [\n- close bracket / right bracket → ]\n- open brace / left brace → {\n- close brace / right brace → }\n\n### Modifiers\n- capital [letter] → uppercase letter\n- uppercase [letter] → uppercase letter\n- space → literal space character\n\n## Implementation\nAdd a `convertSpokenToCharacter()` function that processes each word/phrase in the spell sequence and maps it to the appropriate character.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-13T02:06:39.470469-07:00","updated_at":"2026-01-13T09:03:35.49886-07:00","closed_at":"2026-01-13T09:03:35.49886-07:00","close_reason":"Implemented spell command conversion for numbers, symbols, and capital modifier"}
{"id":"VoiceFlow-6hy","title":"Improve command history selection and copy experience","description":"Users want to be able to drag-select across multiple history entries. If that's not possible, revert to a better drag-out-of-the-box experience. Also add Command-Shift-Click support for multi-selection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T00:59:58.456844-08:00","updated_at":"2025-12-29T19:45:04.973662-08:00","closed_at":"2025-12-29T19:45:04.973662-08:00","close_reason":"Implemented auto-fill for API keys.","labels":["UI"]}
{"id":"VoiceFlow-6w7","title":"Review: Sensitivity \u0026 Force End Reliability","description":"Review the 2x audio sensitivity increase and the 'Force End' reliability fix (immediate local state reset). Verify 'Extra Long' mode max silence threshold (5s).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T07:17:57.696371-08:00","updated_at":"2025-12-27T07:17:57.696371-08:00","labels":["needs-review","sleep-deprived"]}
{"id":"VoiceFlow-7b0","title":"Intelligent sentence recomputation after pause","description":"When user pauses mid-sentence, intelligently recompute/reprocess the transcript afterward","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-26T23:44:31.257665-08:00","updated_at":"2025-12-26T23:44:31.257665-08:00","labels":["needs-design"]}
{"id":"VoiceFlow-7bh","title":"Implement real-time transcript display and text insertion","description":"Show live transcription as user speaks, insert text into active app","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:18:34.846688-08:00","updated_at":"2025-12-26T18:25:10.074451-08:00","closed_at":"2025-12-26T18:25:10.074451-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-7es","title":"Ignore punctuation in command matching","description":"Treat punctuation as optional by filtering non-alphanumeric tokens and mapping matches to word indices for dedupe.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:50:13.894687-08:00","updated_at":"2025-12-26T21:51:25.656926-08:00","closed_at":"2025-12-26T21:51:25.656926-08:00","close_reason":"Command matching now filters punctuation and maps tokens to word indices"}
{"id":"VoiceFlow-7lt","title":"Research: Alternative command recognition approaches","description":"Explore alternatives to using AssemblyAI for command recognition:\n- Local wake word detection (Picovoice Porcupine, openWakeWord)\n- Hybrid approach: local command detection + cloud transcription\n- Apple Speech Recognition with custom vocabulary\n- On-device ML models for command classification\n\nGoal: Improve reliability and reduce latency for voice commands while keeping transcription quality high.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T22:10:42.360974-08:00","updated_at":"2025-12-27T22:10:42.360974-08:00","comments":[{"id":1,"issue_id":"VoiceFlow-7lt","author":"jacobcole","text":"## Research Session: 2024-12-27\n\n### Command Detection Options Evaluated\n\n| Library | Latency | Size | Custom | License |\n|---------|---------|------|--------|---------|\n| Porcupine | \u003c100ms | ~2MB | Yes | Free non-commercial |\n| openWakeWord | ~80ms | ~50MB | Yes | Apache 2.0 |\n| Vosk | Real-time | 50MB | Vocab | Apache 2.0 |\n| Apple SpeechTranscriber | Fast | System | Built-in | Native |\n\n### macOS 26 SpeechAnalyzer (Now Available)\n- 2.2x faster than Whisper V3 Turbo\n- On-device, no rate limits\n- Modules: SpeechDetector, SpeechTranscriber, DictationTranscriber\n\n### Recommended Architecture\n1. Porcupine/openWakeWord for always-on wake (\u003c4% CPU)\n2. Apple SpeechTranscriber for commands\n3. AssemblyAI for high-accuracy dictation\n\n### Sources\n- picovoice.ai/platform/porcupine\n- github.com/dscripka/openWakeWord\n- developer.apple.com/documentation/speech/speechanalyzer\n","created_at":"2025-12-28T06:50:21Z"},{"id":2,"issue_id":"VoiceFlow-7lt","author":"jacobcole","text":"Research doc created: docs/research/2024-12-27-speech-apis-dictation.md\n\nContains full analysis of command detection options, macOS 26 SpeechAnalyzer, Talon Conformer comparison, and recommended architecture.","created_at":"2025-12-28T06:52:09Z"}]}
{"id":"VoiceFlow-7of","title":"Research: Push commands to AssemblyAI API as vocabulary hints","description":"Investigate if we're currently sending command phrases to AssemblyAI as vocabulary hints (boost_param or word_boost). If not, explore adding them to improve recognition accuracy for commands like 'window recent', 'flow on', etc.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T22:10:40.955609-08:00","updated_at":"2025-12-27T22:10:40.955609-08:00"}
{"id":"VoiceFlow-7sm","title":"Review: Sleep vs On Mode Refactor","description":"Review the implementation of Sleep mode (replacing Wake) and the new Active Behaviors (Mixed, Dictation, Command). Verify mode transitions (Wake up, Mic off) and system command handling.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T07:17:13.593453-08:00","updated_at":"2025-12-27T07:17:13.593453-08:00","labels":["needs-review","sleep-deprived"]}
{"id":"VoiceFlow-806","title":"Revert launch at login default to off","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:14.741199-08:00","updated_at":"2025-12-29T19:45:28.894259-08:00","closed_at":"2025-12-29T19:45:28.894259-08:00","close_reason":"Implemented as requested.","labels":["Config"]}
{"id":"VoiceFlow-8oo","title":"Evaluate wake word alternatives - 'flow' is hard to recognize","description":"The 'flow' prefix commands (flow on, flow off, flow sleep) use the /f/ sound which is a weak labiodental fricative. Research indicates:\n\n- /f/ is harder to detect than plosives (k, t, p) or sibilants (s)\n- Recommended wake words have 6+ phonemes; 'flow on' only has ~5\n\nConsider alternatives with stronger starting sounds:\n- 'voice on/off/sleep' (voiced fricative, 6 phonemes)  \n- 'go flow' prefix (plosive start)\n- 'talk on/off/sleep' (plosive start)\n- Or investigate global hotkeys as an alternative to voice commands for mode switching","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T21:41:52.785022-08:00","updated_at":"2025-12-27T21:42:03.545424-08:00"}
{"id":"VoiceFlow-8q1","title":"Word-level transcript highlighting","description":"Render final vs non-final words differently in the floating panel.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T22:21:13.394389-08:00","updated_at":"2025-12-26T22:22:24.437393-08:00","closed_at":"2025-12-26T22:22:24.437393-08:00","close_reason":"Word-level highlighting implemented in floating panel"}
{"id":"VoiceFlow-8ri","title":"Smarter end-of-sentence punctuation","description":"Avoid adding periods when the utterance isn't naturally a complete sentence (e.g., single words, fragments, commands). Investigate if AssemblyAI has native support for this via API parameters.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T01:01:43.883236-08:00","updated_at":"2026-01-01T01:01:43.883236-08:00","comments":[{"id":11,"issue_id":"VoiceFlow-8ri","author":"jacobcole","text":"## Research Findings (2026-01-01)\n\n### How Competitors Handle It\n- **Aqua Voice** (965ms latency): Uses Whisper decoder as contextual LLM + custom instructions\n- **Wispr Flow** (1399ms latency): LLM-based auto-editing after transcription\n\n### Options for VoiceFlow\n| Approach | Latency | Size |\n|----------|---------|------|\n| Heuristics + NaturalLanguage.framework | \u003c5ms | 0 |\n| Tiny classifier | \u003c10ms | 10-50MB |\n| Qwen2.5-0.5B (4-bit) | 20-50ms | ~300MB |\n\n### Recommended Start\nHeuristics + Apple NaturalLanguage: strip period if \u003c4 words or no verb detected.\n\n### AssemblyAI API\nNo granular punctuation control - post-processing required.","created_at":"2026-01-01T09:09:09Z"}]}
{"id":"VoiceFlow-8u6","title":"Relax mandatory push requirement in AGENTS","description":"Update AGENTS.md so push is recommended rather than mandatory.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-26T21:42:36.172593-08:00","updated_at":"2025-12-26T21:42:41.02335-08:00","closed_at":"2025-12-26T21:42:41.02335-08:00","close_reason":"AGENTS.md updated to make push optional"}
{"id":"VoiceFlow-8y8","title":"Fix live dictation setting ignoring format preference","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T14:29:30.950705-08:00","updated_at":"2025-12-27T14:30:05.033877-08:00","closed_at":"2025-12-27T14:30:05.03389-08:00"}
{"id":"VoiceFlow-96c","title":"Update design doc for command chaining rule","description":"Document command chaining execution rule and punctuation-optional parsing note.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:14:24.401057-08:00","updated_at":"2025-12-26T21:14:34.90501-08:00","closed_at":"2025-12-26T21:14:34.90501-08:00","close_reason":"Design doc updated with chaining rule and parsing note"}
{"id":"VoiceFlow-9b0","title":"Settings window not focusing properly","description":"When opening Settings from menu bar, window opens behind other windows instead of coming to front","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T23:44:47.30967-08:00","updated_at":"2025-12-27T07:17:13.57536-08:00","closed_at":"2025-12-27T10:00:00-08:00","labels":["bug"]}
{"id":"VoiceFlow-9ky","title":"Fix window recent command text still being inserted","description":"Ensure 'window recent' does not leak into dictation text, including after focus changes or halting commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T11:22:25.272926-08:00","updated_at":"2025-12-30T11:23:12.883356-08:00","closed_at":"2025-12-30T11:23:12.883356-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-9pz","title":"App spontaneously going to sleep after brief silence","description":"The app is going to sleep mode after just a few seconds of silence, which is way too aggressive.\n\n## Expected Behavior\n- Stay in On mode during normal pauses in speech\n- Only auto-sleep after extended inactivity (15-30 minutes)\n\n## Actual Behavior\n- Goes to sleep after just a few seconds of quiet\n\n## Investigation\n- Check auto-off timer settings\n- Check silence detection thresholds\n- May be related to utterance end detection settings","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-13T12:39:11.54506-07:00","updated_at":"2026-01-13T13:01:51.523462-07:00","closed_at":"2026-01-13T13:01:51.523462-07:00","close_reason":"Fixed: PTT release was incorrectly triggering sleep even when On mode was activated via voice command. Added pttActivatedOnMode flag to track whether On mode was activated via PTT, and only trigger sleep on PTT release if this flag is true."}
{"id":"VoiceFlow-a5x","title":"Review: Escape Mode \u0026 New Line Logic","description":"Review the 'say' prefix escape mode for literal dictation and the regex-based 'new line' replacement logic. Verify that 'say' correctly inhibits command processing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T07:17:34.115121-08:00","updated_at":"2025-12-27T15:12:49.730207-08:00","closed_at":"2025-12-27T15:12:49.730209-08:00","labels":["needs-review","sleep-deprived"]}
{"id":"VoiceFlow-aeu","title":"Make mode switching shortcuts user-configurable","description":"Allow users to customize keyboard shortcuts for:\n- Off mode (currently Ctrl+Option+Cmd+0)\n- On mode (currently Ctrl+Option+Cmd+1)\n- Sleep mode (currently Ctrl+Option+Cmd+2)\n- Push-to-talk (when implemented)\n\nStore in UserDefaults and add UI in Settings.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-27T23:32:29.683161-08:00","updated_at":"2025-12-27T23:32:29.683161-08:00"}
{"id":"VoiceFlow-arn","title":"Add feedback when focus command cannot find an app","description":"Provide user-visible feedback for focus \u003capp\u003e when no running app matches, and mark focus as a command to avoid dictation leaks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:04:39.431939-08:00","updated_at":"2025-12-30T11:04:57.128347-08:00","closed_at":"2025-12-30T11:04:57.128347-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-axm","title":"On/Off buttons require double-click to activate","description":"The On and Off mode buttons in the floating panel sometimes require clicking twice to activate. The Wake button works correctly on first click. Investigate click handling in ModeButton and mode switching logic in AppState.setMode().","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T00:50:34.721169-08:00","updated_at":"2025-12-27T07:17:13.576481-08:00","closed_at":"2025-12-27T10:00:00-08:00"}
{"id":"VoiceFlow-bd7","title":"Add dynamic 'press' shortcut command","description":"Support commands like 'press command x' and map modifiers/keys to CG events.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T16:10:49.714122-08:00","updated_at":"2026-01-06T16:10:59.633884-08:00","closed_at":"2026-01-06T16:10:59.633884-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-brc","title":"Implement AssemblyAI vocabulary \u0026 latency optimizations","description":"Implement AssemblyAI API optimizations based on research in docs/assemblyai-vocabulary-research.md. Key items: keyterms_prompt for custom vocabulary, mid-stream vocabulary updates, latency optimizations (format_turns=false, pre-emptive utterance processing), and configurable silence thresholds.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T03:56:22.488896-08:00","updated_at":"2025-12-27T15:08:29.085183-08:00","closed_at":"2025-12-27T15:08:29.085185-08:00"}
{"id":"VoiceFlow-brq","title":"Create native Swift macOS speech recognition app for RSI users","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T18:18:09.505667-08:00","updated_at":"2025-12-26T18:25:46.998223-08:00","closed_at":"2025-12-26T18:25:46.998223-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-c6z","title":"Surface errors and warnings in UI","description":"Show warnings for missing API keys and permission issues in the main UI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:41.231491-08:00","updated_at":"2025-12-29T19:45:28.902009-08:00","closed_at":"2025-12-29T19:45:28.902009-08:00","close_reason":"Implemented as requested.","labels":["UI","UX"]}
{"id":"VoiceFlow-cfh","title":"Fix Mac Speech offline connection state + latency warnings","description":"Make Apple Speech report connected state correctly, guard on speech permission, show offline/latency warnings and provider-specific placeholders; add ping latency monitoring for cloud providers.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T16:12:01.227614-08:00","updated_at":"2026-01-06T16:12:09.763007-08:00","closed_at":"2026-01-06T16:12:09.763007-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-cpa","title":"Add ability to rename speakers","description":"Allow users to rename speakers from S0, S1, etc. to meaningful names like 'Me', 'John', etc.\n\nDesign considerations:\n- Where to trigger rename? Click on speaker badge? Context menu?\n- Store mappings in UserDefaults per session or persistently?\n- Should names persist across app restarts?\n- UI: inline edit, popover, or settings panel?\n- Consider auto-detecting 'primary' speaker based on volume/frequency","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-31T21:41:15.081196-08:00","updated_at":"2025-12-31T21:41:25.282634-08:00"}
{"id":"VoiceFlow-ct2","title":"Live dictation spacing issues between utterances","description":"When live dictation mode is on, spaces are not correctly placed before/after utterances that have slight pauses. Need a smarter approach to handle utterance boundaries and spacing.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T22:03:59.421731-08:00","updated_at":"2025-12-27T22:14:35.907513-08:00","closed_at":"2025-12-27T22:14:35.907513-08:00","close_reason":"Fixed in commit a4bb595"}
{"id":"VoiceFlow-cut","title":"Audit force/send dictation behavior (should not trigger API error UI)","description":"Review forceEndUtterance and 'send/submit dictation' command flow; user expects simple paste behavior and reports Invalid API Key warning appearing when using it.","notes":"User wants force/send dictation to only type local buffer; no clipboard, no service force-end.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:46:56.119862-08:00","updated_at":"2025-12-30T11:53:44.649825-08:00","closed_at":"2025-12-30T11:53:44.649825-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-dtb","title":"Implement Push-to-Talk mode","description":"Add a PTT mode with a global shortcut.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:35.995046-08:00","updated_at":"2025-12-29T19:45:28.900306-08:00","closed_at":"2025-12-29T19:45:28.900306-08:00","close_reason":"Implemented as requested.","labels":["Feature"]}
{"id":"VoiceFlow-dxy","title":"Network error message takes too much vertical space and needs refresh/reconnect","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-13T14:18:24.381801-07:00","updated_at":"2026-01-13T14:18:24.381801-07:00"}
{"id":"VoiceFlow-e3g","title":"Floating panel requires multiple clicks after app deactivates","description":"After clicking in another app, the floating panel often requires multiple clicks for Off/On/Wake to register. Likely due to accessory/LSUIElement + SwiftUI WindowGroup not accepting first mouse consistently. Consider replacing with custom non-activating NSPanel (acceptsFirstMouse, becomesKeyOnlyIfNeeded) and ensure click behavior is reliable.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T05:12:04.627225-08:00","updated_at":"2025-12-27T07:17:13.577082-08:00","closed_at":"2025-12-27T10:00:00-08:00"}
{"id":"VoiceFlow-e6w","title":"Implement push-to-talk with global hotkeys","description":"Add push-to-talk functionality with global hotkeys:\n- Function key (fn) as PTT trigger\n- Option+Space as alternative\n- User-configurable shortcuts in settings\n- Need to avoid conflicts with common macOS shortcuts\n\nResearch needed:\n- Check for conflicts with Raycast, Alfred, etc.\n- Use NSEvent.addGlobalMonitorForEvents (requires accessibility permission)\n- Consider using a library like HotKey or MASShortcut","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-27T23:32:28.603924-08:00","updated_at":"2025-12-27T23:32:28.603924-08:00"}
{"id":"VoiceFlow-egd","title":"Dev chrome should show only DEV tag (no border)","description":"Remove the full orange debug border around the floating panel in dev builds; keep only the small DEV tag.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-27T05:12:20.542638-08:00","updated_at":"2025-12-27T06:31:04.612074-08:00","closed_at":"2025-12-27T06:31:04.612074-08:00","close_reason":"Removed dev border; DEV tag only"}
{"id":"VoiceFlow-ekf","title":"Implement Turn-based command parsing","description":"Parse Turn payloads, use word-span dedupe for chaining, and update defaults to multi-word phrases.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T21:14:28.75576-08:00","updated_at":"2025-12-26T21:14:40.964279-08:00","closed_at":"2025-12-26T21:14:40.964279-08:00","close_reason":"Turn-based parsing and chaining support implemented"}
{"id":"VoiceFlow-el8","title":"Global Shortcut: Paste Last Utterance","description":"Implement Ctrl+Cmd+V to paste the last utterance text.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:30.714319-08:00","updated_at":"2025-12-29T19:45:28.898338-08:00","closed_at":"2025-12-29T19:45:28.898338-08:00","close_reason":"Implemented as requested.","labels":["Feature"]}
{"id":"VoiceFlow-elu","title":"Show feedback when special keywords are applied","description":"When dictation keywords like 'new line'/'say'/'spacebar' are applied, show a non-command feedback pill so users know a keyword fired.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:34:42.006207-08:00","updated_at":"2025-12-30T11:45:11.934758-08:00","closed_at":"2025-12-30T11:45:11.934758-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-emf","title":"Push-to-talk button","description":"Add physical keyboard shortcut for push-to-talk mode as alternative to always-listening","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T23:44:43.468672-08:00","updated_at":"2025-12-26T23:44:43.468672-08:00","labels":["backlog"]}
{"id":"VoiceFlow-eqa","title":"Implement per-command pause requirements","description":"Voice commands like 'undo that' are being triggered too aggressively in the middle of sentences. Added a 'requiresPause' property to VoiceCommand to only trigger them at the end of a turn or with a delay.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T02:04:12.520699-08:00","updated_at":"2025-12-29T19:45:10.160863-08:00","closed_at":"2025-12-29T19:45:10.160863-08:00","close_reason":"Added history icon, compact volume, paste shortcut, PTT mode, error surfacing, and shortcut help.","labels":["Logic","UI"]}
{"id":"VoiceFlow-er4","title":"Show voice command hints in mode dropdown","description":"Add hints like 'speech on', 'speech off', 'microphone off' next to the mode options in the dropdown","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T21:55:58.020129-08:00","updated_at":"2025-12-31T21:57:43.895751-08:00","closed_at":"2025-12-31T21:57:43.895751-08:00","close_reason":"Added voiceCommandHint property to MicrophoneMode and display in dropdown menu"}
{"id":"VoiceFlow-f0d","title":"Newline/enter at end of utterance not triggering submission","description":"When saying 'newline' or 'press enter' at the end of an utterance to submit (e.g., in Claude Code), it often doesn't work - possibly due to timing/race condition.\n\n## Symptoms\n- User says text followed by \"press enter\" or \"newline\"\n- The enter keystroke doesn't get sent or gets lost\n- May be related to utterance end timing\n\n## Potential Solutions\n- Add slight delay before processing end-of-utterance commands\n- Ensure keyboard events are sent after text is fully typed\n- Consider a \"submit mode\" that automatically sends enter after each utterance","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-13T12:39:08.293982-07:00","updated_at":"2026-01-13T12:39:08.293982-07:00"}
{"id":"VoiceFlow-gh7","title":"Handle split-word artifacts across utterances (cond. / Ense)","description":"Review needed: decide heuristic for merging split words across lines/utterances.\n\nInvestigate ASR/formatter splitting words across lines/utterances (e.g., 'cond.\\nEnse') and add post-processing to merge when appropriate.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:32:18.726929-08:00","updated_at":"2026-01-06T16:16:53.947454-08:00"}
{"id":"VoiceFlow-gqb","title":"Add speaker detection/diarization feature","description":"Implement optional speaker diarization for AssemblyAI. Currently disabled due to latency impact - needs UI toggle and proper handling.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-31T21:55:45.113209-08:00","updated_at":"2025-12-31T21:55:45.113209-08:00"}
{"id":"VoiceFlow-hc1","title":"Fix command handling so recognized commands don't get pasted","description":"Ensure command-only utterances (e.g., 'window recent') are consumed and not inserted as dictation, including in undo/focus flows.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T10:58:54.477961-08:00","updated_at":"2025-12-30T11:01:52.407153-08:00","closed_at":"2025-12-30T11:01:52.407153-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-hel","title":"Investigate command text being inserted during command execution","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T10:58:43.353062-08:00","updated_at":"2025-12-30T11:01:41.332003-08:00","closed_at":"2025-12-30T11:01:41.332003-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-hfn","title":"Map design doc to code updates for Turn handling","description":"Review code vs updated design doc; propose concrete implementation changes for AssemblyAI v3 Turn semantics, dedupe, and formatted Turn handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T19:42:57.88065-08:00","updated_at":"2025-12-26T21:12:51.918495-08:00","closed_at":"2025-12-26T21:12:51.918495-08:00","close_reason":"Implemented Turn-based parsing, dedupe, and command chaining support"}
{"id":"VoiceFlow-hqt","title":"Implement offline fallback to Mac speech model","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T14:19:17.769357-08:00","updated_at":"2025-12-27T14:19:26.537202-08:00","closed_at":"2025-12-27T14:19:26.537212-08:00"}
{"id":"VoiceFlow-i3t","title":"Investigate 'say' literal mode failures (e.g., 'say newline')","description":"## Root Cause Found\n\nWhen utterances combine mode commands with \"say\" escape:\n- \"speech on say press enter\" → \"say\" is not at start → escape fails\n- \"say press enter\" (alone) → works correctly\n\nThe issue is \"say\" must be at transcript START to trigger escape.\n\n## Fix Needed\n\nAfter stripping wake/mode commands from the transcript beginning, check if the REMAINING text starts with \"say\" and treat it as literal.\n\nExample flow:\n1. \"speech on say press enter\" arrives\n2. \"speech on\" is detected and processed as mode switch\n3. Remaining \"say press enter\" should be checked for \"say\" prefix\n4. If found, escape the rest (\"press enter\" → literal text)\n\n## Related\n- VoiceFlow-f0d: Newline/enter at end of utterance","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T14:31:56.852379-08:00","updated_at":"2026-01-13T13:43:40.559417-07:00","closed_at":"2026-01-13T13:43:40.559417-07:00","close_reason":"Fixed: processInlineReplacements was stripping command phrases like 'press enter' even in literal mode. Added if \\!isLiteral check. Codex MCP found this bug instantly."}
{"id":"VoiceFlow-jhh","title":"Mode buttons not clickable in floating panel","description":"The mode buttons (Off, On, Wake) in the floating panel UI are not responding to clicks. The PanelWindowConfigurator overlay NSView may be intercepting mouse events. Fix attempted: PassThroughView with hitTest returning nil.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T00:10:22.44981-08:00","updated_at":"2025-12-27T07:17:13.577608-08:00","closed_at":"2025-12-27T10:00:00-08:00"}
{"id":"VoiceFlow-jsi","title":"Add voice command detection for wake mode","description":"Detect wake word to activate, support basic commands like pause/resume","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T18:18:36.430533-08:00","updated_at":"2025-12-26T18:25:10.338388-08:00","closed_at":"2025-12-26T18:25:10.338388-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-k3w","title":"Add FluidAudio Parakeet as offline ASR option","description":"## Research Summary\n\nNVIDIA's Parakeet ASR models can run on-device via **FluidAudio** (Swift package that converts them to CoreML for Apple Neural Engine).\n\n### Available Models via FluidAudio\n\n| Model | Size | Languages | Best For |\n|-------|------|-----------|----------|\n| parakeet-eou-160 | ~250MB | English | Streaming with EOU detection (lowest latency) |\n| parakeet-tdt-0.6b-v2 | ~600MB | English | Highest English accuracy (6.05% WER) |\n| parakeet-tdt-0.6b-v3 | ~600MB | 25 languages | Multilingual support |\n\n### Reference Implementation\n\nYappatron already uses FluidAudio's Parakeet EOU 120M model - see `/Users/jacobcole/code/yappatron/packages/app/Yappatron/Sources/TranscriptionEngine.swift` for working code.\n\nKey components:\n- `StreamingEouAsrManager` - handles streaming ASR with end-of-utterance detection\n- 160ms audio chunks for low latency\n- Configurable EOU debounce (silence threshold)\n- Partial + final transcription callbacks\n- 16kHz mono Float32 audio format\n\n### Integration Approach\n\n1. Add FluidAudio SPM dependency: `https://github.com/FluidInference/FluidAudio.git`\n2. Create `FluidAudioService.swift` following the existing service pattern (like AppleSpeechService)\n3. Add `DictationProvider.fluidAudio` or `.parakeet` enum case\n4. Wire up audio capture (already 16kHz mono in AudioCaptureManager - may need Float32 conversion)\n5. Add model download on first use (via `DownloadUtils.loadModels`)\n\n### Considerations\n\n- Models are CC-BY-4.0 licensed (commercial use OK)\n- ~250-600MB download on first use\n- Requires macOS 14.0+ / iOS 17.0+\n- Uses Neural Engine (power efficient)\n- Potentially better accuracy than Apple Speech for dictation\n\n### Sources\n- https://github.com/FluidInference/FluidAudio\n- https://huggingface.co/nvidia/parakeet-tdt-0.6b-v3\n- https://developer.nvidia.com/blog/pushing-the-boundaries-of-speech-recognition-with-nemo-parakeet-asr-models/","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-08T22:35:55.261731-07:00","updated_at":"2026-01-08T22:36:28.978111-07:00"}
{"id":"VoiceFlow-ke3","title":"DEV badge wraps vertically when window is narrow","description":"When the floating panel is narrow, the 'DEV' text wraps vertically and looks bad. Should show just 'D' or hide entirely when space is tight.","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-13T12:34:41.011605-07:00","updated_at":"2026-01-13T12:34:41.011605-07:00"}
{"id":"VoiceFlow-luv","title":"Add tab new alias + command flush delay","description":"Support 'tab new' command and delay command execution briefly after dictation flush to avoid racing typed text.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-06T16:11:29.967463-08:00","updated_at":"2026-01-06T16:11:52.16536-08:00","closed_at":"2026-01-06T16:11:52.16536-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-n7n","title":"Live dictation with delta tracking","description":"Type finalized words incrementally using word_is_final, with optional setting and proper spacing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T22:23:33.518906-08:00","updated_at":"2025-12-26T22:31:48.209875-08:00","closed_at":"2025-12-26T22:31:48.209875-08:00","close_reason":"Live dictation with delta tracking implemented"}
{"id":"VoiceFlow-nec","title":"Fix floating panel visibility toggling","description":"Ensure panel window is created/shown at launch and menu toggle reflects state.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T22:39:54.929374-08:00","updated_at":"2025-12-26T22:40:33.848383-08:00","closed_at":"2025-12-26T22:40:33.848383-08:00","close_reason":"Panel window now created on launch and menu toggle updates state"}
{"id":"VoiceFlow-o8b","title":"Copy button behavior unclear/broken","description":"Copy button is inconsistent - unclear when it shows up","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T21:55:31.436895-08:00","updated_at":"2025-12-31T21:57:42.150203-08:00","closed_at":"2025-12-31T21:57:42.150203-08:00","close_reason":"Fixed copy button to show when any content exists (recentTurns or currentTranscript) and copies all visible text"}
{"id":"VoiceFlow-oqh","title":"Research Utter Command vocab + add missing commands (e.g., window close) and doc ordering","description":"Review needed: confirm Utter Command vocabulary sources + preferred command order.\n\nFind the official Utter Command vocabulary list, identify missing commands (e.g., window close), implement them, and document preferred command order.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:31:13.456028-08:00","updated_at":"2026-01-06T16:16:26.82893-08:00"}
{"id":"VoiceFlow-p0a","title":"Review: Debug Log \u0026 Settings Integration","description":"Review the new Debug tab in Settings and the live logging of events (commands, errors, typing, connections). Verify log clearing and retention logic.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:17:44.585651-08:00","updated_at":"2025-12-27T07:17:44.585651-08:00","labels":["needs-review","sleep-deprived"]}
{"id":"VoiceFlow-p15","title":"Expand focus to windows/tabs (app + tab manager)","description":"Review needed: define focus scope and matching for windows/tabs.\n\nSupport focusing specific windows/tabs (e.g., Chrome tabs) beyond app-level focus; design matching rules and UX.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:32:32.02342-08:00","updated_at":"2026-01-06T16:16:59.221096-08:00"}
{"id":"VoiceFlow-p7v","title":"Feature: Voice-Activated App Focusing","description":"Research and implement a way to focus specific applications by voice (e.g., 'focus Chrome'). Technical path: Use NSWorkspace.shared.runningApplications to list apps and NSRunningApplication.activate() to bring them to front. Needs fuzzy matching for spoken app names.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:38:48.648489-08:00","updated_at":"2025-12-27T15:09:50.855623-08:00","closed_at":"2025-12-27T15:09:50.855625-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-pw0","title":"Add 'format that' command for selected text (style/cleanup)","description":"Review needed: decide formatting scope + tooling (Grammarly vs AI).\n\nCreate a command that formats selected text (cleanup punctuation/caps/whitespace) and optionally runs style review (Grammarly/AI).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-06T14:32:42.818718-08:00","updated_at":"2026-01-06T16:17:04.508765-08:00"}
{"id":"VoiceFlow-q15","title":"Improve focus command matching (punctuation/aliases)","description":"Normalize focus queries and add common aliases (e.g., iMessage -\u003e Messages) so feedback matches actual focus behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:24:34.246999-08:00","updated_at":"2025-12-30T11:25:34.885945-08:00","closed_at":"2025-12-30T11:25:34.885945-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-qkr","title":"Clicking On button from Off should go to On state, not Sleep","description":"When microphone is Off and user clicks the On (green) button, it should go directly to On/green state. Currently it seems to jump to Sleep/orange state instead.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-13T12:34:42.572857-07:00","updated_at":"2026-01-13T12:34:42.572857-07:00"}
{"id":"VoiceFlow-qpb","title":"Feature: Idea Flow Integration","description":"Implement integration with Idea Flow for quick note capturing. Research commands like 'save to idea flow' or 'write this note for Idea Flow'. Explore UX where the command can occur before or after the dictated text. Consider real-time interaction via a Raycast-style utility or direct stream injection.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T08:21:13.645217-08:00","updated_at":"2025-12-27T15:11:17.386818-08:00","closed_at":"2025-12-27T15:11:17.38682-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-r3s","title":"Close paren and other dictation keywords not working","description":"'Close paren' and potentially other dictation keywords aren't being converted properly.\n\n## Missing/Broken Keywords\n- \"close paren\" → )\n- Need to verify full Dragon NaturallySpeaking-style keyword list\n\n## Related\n- VoiceFlow-4o7: Explicit punctuation keywords in live dictation mode\n- VoiceFlow-014: Spoken punctuation keywords\n\n## Solution\nEnsure all standard dictation keywords are in the vocabulary/conversion list and working.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-13T12:39:09.545552-07:00","updated_at":"2026-01-13T12:39:09.545552-07:00"}
{"id":"VoiceFlow-r9v","title":"Extend command flash duration","description":"Keep the command toast visible longer for better readability.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T11:24:24.028094-08:00","updated_at":"2025-12-30T11:25:26.20792-08:00","closed_at":"2025-12-30T11:25:26.20792-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-rce","title":"Create UI with three microphone modes","description":"Modes: Off (no response), On (transcribing), Wake (voice commands). Show current mode visually.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:18:33.328509-08:00","updated_at":"2025-12-26T18:25:09.54532-08:00","closed_at":"2025-12-26T18:25:09.54532-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-rhc","title":"Review: Command Feedback \u0026 UX Fixes","description":"Review the green pulse feedback on command recognition, the status label in the floating panel, and the fixed behavior dropdown UI alignment/shape.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T07:17:23.875059-08:00","updated_at":"2025-12-27T07:17:23.875059-08:00","labels":["needs-review","sleep-deprived"]}
{"id":"VoiceFlow-rsr","title":"Feature: Voice Spelling Mode","description":"Implement a way to spell out words or characters by voice (e.g., 'spell A B C'). The app should parse the letters/words after the 'spell' command and type them out character-by-character. Useful for acronyms, technical terms, and complex passwords.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:39:32.914101-08:00","updated_at":"2025-12-27T15:09:14.975546-08:00","closed_at":"2025-12-27T15:09:14.975549-08:00","labels":["backlog","needs-design"]}
{"id":"VoiceFlow-rzz","title":"Command history feature","description":"Add ability to view and potentially re-execute past voice commands","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-26T23:44:40.137872-08:00","updated_at":"2025-12-27T15:07:26.887392-08:00","closed_at":"2025-12-27T15:07:26.887394-08:00","labels":["backlog"]}
{"id":"VoiceFlow-s4b","title":"Letter 'e' dropped when typing into Google Docs","description":"When dictating into Google Docs, the letter 'e' is systematically dropped from typed output.\n\n**Observed behavior:**\n- VoiceFlow correctly transcribes: 'we are a universal ai agent'\n- Google Docs receives: 'W ar a univrsal ai agnt.'\n- Every instance of 'e' is missing\n\n**Hypothesis:**\n1. Google Docs may intercept 'e' key for internal shortcut\n2. Keystroke injection timing issue specific to Google Docs\n3. Race condition between VoiceFlow's CGEvent posting and Google Docs' input handling\n\n**Investigation needed:**\n- Check if other apps have similar issues\n- Test keystroke injection timing/delays\n- Check if Google Docs has 'e' as a keyboard shortcut\n- Consider using accessibility API instead of CGEvent for Google Docs","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2026-01-13T14:26:49.20777-07:00","updated_at":"2026-01-13T14:30:06.400931-07:00"}
{"id":"VoiceFlow-s7l","title":"Expose formatted turns toggle (format_turns)","description":"Add a user setting to toggle AssemblyAI `format_turns` so users can choose formatted vs raw turns (may affect latency/punctuation). Default to formatted=true.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-27T06:03:45.732466-08:00","updated_at":"2025-12-27T06:03:45.732466-08:00"}
{"id":"VoiceFlow-sgr","title":"Pasting/typing behavior broken in dictation mode","description":"When in 'On' mode (dictation), spoken text is not being typed into the active application. The transcript may show in the panel but CGEvent typing is not working. Check: turn.isFormatted flag, typeText() function, accessibility permissions.","notes":"Root cause identified: app lacks Accessibility permission. Added auto-prompt to open System Settings when permission not granted.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T00:10:29.464693-08:00","updated_at":"2025-12-27T03:21:49.713307-08:00","closed_at":"2025-12-27T03:21:49.713307-08:00","close_reason":"Dictation typing/accessibility issue resolved; permission handling now fixed.","dependencies":[{"issue_id":"VoiceFlow-sgr","depends_on_id":"VoiceFlow-xqq","type":"blocks","created_at":"2025-12-27T00:59:21.442526-08:00","created_by":"daemon"}]}
{"id":"VoiceFlow-so6","title":"UI Improvements: History Icon and Compact Volume","description":"Add history icon to top bar that opens history settings. Make volume indicator smaller/vertical.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:41:25.481691-08:00","updated_at":"2025-12-29T19:45:28.897046-08:00","closed_at":"2025-12-29T19:45:28.897046-08:00","close_reason":"Implemented as requested.","labels":["UI"]}
{"id":"VoiceFlow-sqa","title":"Improve Commands settings categories (TOC/filters)","description":"Make command categories more obvious in Settings \u003e Commands (e.g., segmented filter or table of contents).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T11:58:16.403364-08:00","updated_at":"2025-12-30T12:19:51.352226-08:00","comments":[{"id":7,"issue_id":"VoiceFlow-sqa","author":"jacobcole","text":"Commands settings categories still unclear; need TOC/section UX improvements","created_at":"2025-12-30T20:19:51Z"}]}
{"id":"VoiceFlow-ton","title":"Improve focus matching (ignore spaces/punctuation)","description":"Allow focus commands like 'focus ideaflow' to match app names ignoring spaces/punctuation.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-06T16:11:08.750742-08:00","updated_at":"2026-01-06T16:11:18.267179-08:00","closed_at":"2026-01-06T16:11:18.267179-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-u5q","title":"Window resize by dragging broken","description":"Lost the ability to resize the floating panel window by dragging. Need to investigate what change broke this.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-01T01:34:35.639953-08:00","updated_at":"2026-01-01T01:34:35.639953-08:00"}
{"id":"VoiceFlow-ucp","title":"Verify no-punctuation mode works correctly","description":"## Verification Needed\n\nConfirm that the \"no punctuation\" mode works correctly across all speech providers.\n\n### Current Implementation\n\n**Apple Speech (AppleSpeechService.swift)**:\n- Uses `recognitionRequest.addsPunctuation = false` when live dictation is enabled (line 75)\n- This is controlled by `liveDictationEnabled` setting in AppState (line 1021)\n\n**AssemblyAI / Deepgram**:\n- No explicit punctuation toggle found in current implementation\n- These services may always return punctuated text\n\n### Test Cases\n\n1. Enable \"Live Dictation\" mode in settings\n2. Use Apple Speech (offline mode)\n3. Speak a sentence and verify no punctuation is added\n4. Test with online providers (AssemblyAI/Deepgram) - document behavior\n\n### Potential Issues\n\n- AssemblyAI's `format_turns` setting (ticket VoiceFlow-s7l) may need to be exposed\n- Deepgram may need `punctuate: false` parameter in WebSocket connection\n- Need to verify AI formatter doesn't re-add punctuation when no-punctuation mode is active\n\n### Related Tickets\n- VoiceFlow-s7l: Expose formatted turns toggle\n- VoiceFlow-z25: Context-aware capitalization/punctuation","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T22:35:57.207007-07:00","updated_at":"2026-01-09T21:01:33.85399-07:00","closed_at":"2026-01-09T21:01:33.85399-07:00","close_reason":"Fixed: expectsFormattedTurns was hardcoded to true, preventing unformatted turns from moving to history in live dictation mode. Changed to computed property based on liveDictationEnabled."}
{"id":"VoiceFlow-vfx","title":"Set up Swift macOS project with SwiftUI","description":"Create Xcode project structure with Package.swift, main app, and basic window","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:18:29.260534-08:00","updated_at":"2025-12-26T18:25:08.604596-08:00","closed_at":"2025-12-26T18:25:08.604596-08:00","close_reason":"Closed"}
{"id":"VoiceFlow-xqq","title":"Accessibility permission not being detected after granting","description":"VoiceFlow reports AXIsProcessTrusted() as false even after user grants Accessibility permission in System Settings. Tried: AXIsProcessTrustedWithOptions with prompt, re-signing app with codesign, manually opening System Settings. The app appears in Accessibility list but permission check still fails. May need proper code signing with developer certificate or different approach to permission detection.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T00:59:14.118916-08:00","updated_at":"2025-12-27T03:21:57.831201-08:00","closed_at":"2025-12-27T03:21:57.831201-08:00","close_reason":"Accessibility detection issue resolved; permission handling verified and stable now."}
{"id":"VoiceFlow-z25","title":"Improve context-aware capitalization/punctuation on transfer","description":"Review needed: define capitalization/punctuation rules by app context.\n\nExplore using accessibility context (focused field/app) to adjust capitalization/punctuation before typing; align with AI formatter behavior.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-06T14:32:54.643277-08:00","updated_at":"2026-01-06T16:17:09.870539-08:00"}
{"id":"VoiceFlow-z2l","title":"Adjust transcript copy button to avoid overlapping text","description":"Copy button in floating panel overlaps transcript text; adjust layout or padding to prevent overlap.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T11:44:23.077869-08:00","updated_at":"2025-12-30T11:44:23.077869-08:00"}
{"id":"VoiceFlow-z7i","title":"Feature: Advanced Voice Window Management","description":"Implement voice commands for switching between recent windows/apps. 1) 'window recent [N]': switch to the nth most recent app using a stack maintained via NSWorkspace notifications. 2) 'window switcher': simulate a persistent ⌘+Tab overlay. Research using Accessibility APIs for individual window-level switching vs just app-level.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T07:40:54.430987-08:00","updated_at":"2025-12-27T14:43:05.000188-08:00","closed_at":"2025-12-27T14:43:05.000191-08:00","labels":["backlog","needs-design"]}
